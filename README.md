# Tatum Middleware 
Tatum Middleware is a client to Tatum Blockchain API.

## Where to start
In order to start work with Tatum Blockchain API, please reach us directly at <a href="mailto:hello@tatum.io">hello@tatum.io</a> in order to create access API key.

## Install docker image
Tatum Middleware docker image is available in Docker HUB under `tatumio/tatum-middleware` tag, see <a href="https://hub.docker.com/r/tatumio/tatum-middleware">https://hub.docker.com/r/tatumio/tatum-middleware</a>.

#### Example command, how to pull Tatum Middleware image from Docker HUB
```docker pull tatumio/tatum-middleware```

## Run docker image
Tatum Middleware Docker container must/can be run with following environment variables:
  * API_URL - URL of Tatum Core API that Tatum Middleware will communicate with, must be present<br/>
  For sandbox installation, use `https://sandbox.tatum.io`.<br/>
  For production installation, use `https://api.tatum.io`.<br/>
  * INFURA_KEY - API key to Infura to communicate with Ethereum blockchain. Defaults to Tatum internal key.<br/>
  <b>It is highly recommended to change this value.</b>
<p>
Tatum Middleware Docker container exposes port `6543`, on which REST API server listens for incoming HTTP requests.
In order to publish exposed port outside of the docker container, `-p` flag should be used with defined mapping.
</p>

#### Example script to start docker container: <br/>
```docker run -e API_URL=https://sandbox.tatum.io -p 6543:6543/tcp tatumio/tatum-middleware```

## Usage
Tatum Middleware wraps Tatum Core API as is described in <a target="_blank" href="https://www.tatum.io/apidoc.html#tatum-middleware-api">Developer Section</a>.<br/>
On top of it, it brings simple utility functions such as creation of BIP44 compatible wallets, that are used within Tatum Core.<br/>
Also, it gives developers simple options to send Ethereum and Bitcoin payments via local REST API.
Some of the helpers methods sends mnemonic or private keys via HTTP protocol. It is highly recommended to
run Tatum Middleware from private LAN with limited access from outside world, since there are very sensitive
data to be transferred and there is high risk of loss of funds.

## API docs
Local Swagger UI available at `/api-docs` of your running docker container.

### API endpoints
<!-- markdown-swagger -->
 Endpoint                             | Method | Auth? | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
 ------------------------------------ | ------ | ----- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 `/v2/jwt/{key}/{secret}`             | GET    | No    | <p>Generate valid JWT token from API Key. This token is used to authorize access to Tatum Blockchain API. JWT token is valid only for 30 minutes and it should be renewed ideally with every new request.</p>                                                                                                                                                                                                                                                                                                                                                                                                      
 `/v2/xrp/wallet`                     | GET    | No    | <p>Generate XRP account. 1 common XRP account is used for all customer accounts within Tatum and are distinguished by tag. We can generate as many accounts as we want, but as soon as one is used for address generation, this one will be used for generation of DestinationTag.</p>                                                                                                                                                                                                                                                                                                                             
 `/v2/xrp/transfer`                   | POST   | Yes   | <p>Send XRP from account to account. This will create Tatum internal withdrawal request with ID. If every system works as expected, withdrawal request is marked as complete and transaction id is assigned to it.<ul><li>If XRP server connection is unavailable, withdrawal request is cancelled.</li><li>If blockchain transfer is successful, but is it not possible to reach Tatum Blockchain API, transaction id of blockchain transaction is returned and withdrawal request must be completed manually, otherwise all other withdrawals will be pending.</li></ul></p>                                     
 `/v2/bitcoin/wallet`                 | GET    | No    | <p>Generate wallet. This will create BIP44 HD wallet with predefined derivation path and returns mnemonic phrase and extended public and private key to be used for address generation.</p>                                                                                                                                                                                                                                                                                                                                                                                                                        
 `/v2/bitcoin/wallet/xpub/{xpub}/{i}` | GET    | No    | <p>Calculate address from extended public key on Testnet / Mainnet for given derivation path index.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
 `/v2/bitcoin/wallet/xpriv`           | POST   | No    | <p>Calculate private key of address from mnemonic on Testnet / Mainnet for given derivation path index.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
 `/v2/bitcoin/transfer`               | POST   | Yes   | <p>Send BTC from address to address. This will create Tatum internal withdrawal request with ID. If every system works as expected, withdrawal request is marked as complete and transaction id is assigned to it.<ul><li>If Bitcoin server connection is unavailable, withdrawal request is cancelled.</li><li>If blockchain transfer is successful, but is it not possible to reach Tatum Blockchain API, transaction id of blockchain transaction is returned and withdrawal request must be completed manually, otherwise all other withdrawals will be pending.</li></ul></p>                                 
 `/v2/ethereum/wallet`                | GET    | No    | <p>Generate wallet. This will create BIP44 HD wallet with predefined derivation path and returns mnemonic phrase and extended public and private key to be used for address generation.</p>                                                                                                                                                                                                                                                                                                                                                                                                                        
 `/v2/ethereum/wallet/xpub/{pub}/{i}` | GET    | No    | <p>Calculate address from xpub for given derivation path index.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
 `/v2/ethereum/wallet/xpriv`          | POST   | No    | <p>Calculate private key of address from mnemonic on Ropsten / Mainnet for given derivation path index.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
 `/v2/ethereum/transfer`              | POST   | Yes   | Send ETH from account to account. This will create Tatum internal withdrawal request with ID. If every system works as expected, withdrawal request is marked as complete and transaction id is assigned to it.<ul><li>If Ethereum server connection is unavailable, withdrawal request is cancelled.</li><li>If blockchain transfer is successful, but is it not possible to reach Tatum Blockchain API, transaction id of blockchain transaction is returned and withdrawal request must be completed manually, otherwise all other withdrawals will be pending.</li></ul></p>                                   
 `/v2/ethereum/erc20/deploy`          | POST   | Yes   | <p>Deploy ETH ERC20 Smart Contract. Response could take quite a lot of time, average time of creation is 3-4 minutes. After deploying contract to blockchain, contract address will become available and must be stored within Tatum, otherwise it will not be possible to interact with it.</p>                                                                                                                                                                                                                                                                                                                   
 `/v2/ethereum/erc20/transfer`        | POST   | Yes   | <p>Transfer ETH ERC20 Smart Contract Tokens from account to account. This will create Tatum internal withdrawal request with ID. If every system works as expected, withdrawal request is marked as complete and transaction id is assigned to it.<ul><li>If Ethereum server connection is unavailable, withdrawal request is cancelled.</li><li>If blockchain transfer is successful, but is it not possible to reach Tatum Blockchain API, transaction id of blockchain transaction is returned and withdrawal request must be completed manually, otherwise all other withdrawals will be pending.</li></ul></p>
<!-- /markdown-swagger -->
